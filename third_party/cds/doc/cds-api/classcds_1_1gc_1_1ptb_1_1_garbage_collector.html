<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cds: cds::gc::ptb::GarbageCollector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespacecds.html">cds</a>      </li>
      <li><a class="el" href="namespacecds_1_1gc.html">gc</a>      </li>
      <li><a class="el" href="namespacecds_1_1gc_1_1ptb.html">ptb</a>      </li>
      <li><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<h1>cds::gc::ptb::GarbageCollector Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="cds::gc::ptb::GarbageCollector" -->
<p>Memory manager (Garbage collector)  
<a href="#_details">More...</a></p>

<p><code>#include &lt;ptb.h&gt;</code></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html">InternalState</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal GC statistics.  <a href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9849e1e0c0ac0b2a02f959382e9036b"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::CDS_DECLARE_EXCEPTION" ref="ac9849e1e0c0ac0b2a02f959382e9036b" args="(PTBManagerEmpty,&quot;Global PTB GarbageCollector is NULL&quot;)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#ac9849e1e0c0ac0b2a02f959382e9036b">CDS_DECLARE_EXCEPTION</a> (PTBManagerEmpty,&quot;Global PTB <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a> is NULL&quot;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classcds_1_1_exception.html" title="Base of all exceptions in the library.">Exception</a> "No GarbageCollector object is created". <br/></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html">InternalState</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a4b6cbefdfbc11ed9ad6178a8955d2e5a">getInternalState</a> (<a class="el" href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html">InternalState</a> &amp;stat) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal statistics.  <a href="#a4b6cbefdfbc11ed9ad6178a8955d2e5a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acb40785512225a7cc1b3cd2aac0b5b90"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::isStatisticsEnabled" ref="acb40785512225a7cc1b3cd2aac0b5b90" args="() const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#acb40785512225a7cc1b3cd2aac0b5b90">isStatisticsEnabled</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if internal statistics enabled. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab93d7a7b89e4d9721aa71dd7f7988fa8"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::enableStatistics" ref="ab93d7a7b89e4d9721aa71dd7f7988fa8" args="(bool bEnable)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#ab93d7a7b89e4d9721aa71dd7f7988fa8">enableStatistics</a> (bool bEnable)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables/disables internal statistics. <br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void CDS_STDCALL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#ab84b0e25888dca13a32726fd43f3a98b">Construct</a> (size_t nLiberateThreshold=2048, size_t nInitialThreadGuardCount=8)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes PTB memory manager singleton.  <a href="#ab84b0e25888dca13a32726fd43f3a98b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void CDS_STDCALL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#aca8282ef97000c6892a6a409f29b8b95">Destruct</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys PTB memory manager.  <a href="#aca8282ef97000c6892a6a409f29b8b95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a3e7be5aec4135783ae8446aa3881920a">instance</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns pointer to <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html" title="Memory manager (Garbage collector)">GarbageCollector</a> instance.  <a href="#a3e7be5aec4135783ae8446aa3881920a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17e76091f755012fbb1d9300aef09874"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::isUsed" ref="a17e76091f755012fbb1d9300aef09874" args="()" -->
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a17e76091f755012fbb1d9300aef09874">isUsed</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if global GC object is constructed and may be used. <br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e122250a9ed4a20e7861f6137cd107f"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::m_GuardPool" ref="a9e122250a9ed4a20e7861f6137cd107f" args="" -->
<a class="el" href="classcds_1_1gc_1_1ptb_1_1details_1_1guard__allocator.html">details::guard_allocator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a9e122250a9ed4a20e7861f6137cd107f">m_GuardPool</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_guard.html" title="Guard.">Guard</a> pool. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6475b77441a476ce1fd586cb6b395c78"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::m_RetiredAllocator" ref="a6475b77441a476ce1fd586cb6b395c78" args="" -->
<a class="el" href="classcds_1_1gc_1_1ptb_1_1details_1_1retired__ptr__pool.html">details::retired_ptr_pool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a6475b77441a476ce1fd586cb6b395c78">m_RetiredAllocator</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pool of free retired pointers. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afcf393aeb8c20fb9c6a63de4a4f226a1"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::m_RetiredBuffer" ref="afcf393aeb8c20fb9c6a63de4a4f226a1" args="" -->
<a class="el" href="classcds_1_1gc_1_1ptb_1_1details_1_1retired__ptr__buffer.html">details::retired_ptr_buffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#afcf393aeb8c20fb9c6a63de4a4f226a1">m_RetiredBuffer</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retired pointer buffer to liberate. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa718498d702904f52df70ec3a3d1287e"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::m_lockLiberate" ref="aa718498d702904f52df70ec3a3d1287e" args="" -->
<a class="el" href="classcds_1_1lock_1_1_spin_t.html">lock::Spin</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#aa718498d702904f52df70ec3a3d1287e">m_lockLiberate</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Access to "liberate" procedure. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5163d4045709292b6f8812742776c6a3"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::m_nLiberateThreshold" ref="a5163d4045709292b6f8812742776c6a3" args="" -->
const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a5163d4045709292b6f8812742776c6a3">m_nLiberateThreshold</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Max size of retired pointer buffer to call liberate. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af299286905156dac03ce9308f2d4db88"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::m_nInitialThreadGuardCount" ref="af299286905156dac03ce9308f2d4db88" args="" -->
const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#af299286905156dac03ce9308f2d4db88">m_nInitialThreadGuardCount</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial count of guards allocated for <a class="el" href="classcds_1_1gc_1_1ptb_1_1_thread_g_c.html" title="Thread GC.">ThreadGC</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae7f6cfb8d1d1fcf71409c58b41e12b2a"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::m_stat" ref="ae7f6cfb8d1d1fcf71409c58b41e12b2a" args="" -->
<a class="el" href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html">InternalState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#ae7f6cfb8d1d1fcf71409c58b41e12b2a">m_stat</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal statistics. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7aed83517a3791a1bbc1557f6575d9b0"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::m_bStatEnabled" ref="a7aed83517a3791a1bbc1557f6575d9b0" args="" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7aed83517a3791a1bbc1557f6575d9b0">m_bStatEnabled</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal Statistics enabled. <br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80c30535f7d8b606fd11b5bf4388837c"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::m_pManager" ref="a80c30535f7d8b606fd11b5bf4388837c" args="" -->
static <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a80c30535f7d8b606fd11b5bf4388837c">m_pManager</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">GC global instance. <br/></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d476ed6cac2fbf542b878b1664eb3c3"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::ThreadGC" ref="a3d476ed6cac2fbf542b878b1664eb3c3" args="" -->
class&#160;</td><td class="memItemRight" valign="bottom"><b>ThreadGC</b></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a37de38bb1d420c2aec2d7d5150d95fa7">allocGuard</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal interface.  <a href="#a37de38bb1d420c2aec2d7d5150d95fa7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f9c9aa951b763fc8bf8c4769a6eb81c"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::freeGuard" ref="a3f9c9aa951b763fc8bf8c4769a6eb81c" args="(details::guard_data *pGuard)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a3f9c9aa951b763fc8bf8c4769a6eb81c">freeGuard</a> (<a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a> *pGuard)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees guard <code>g</code> for reusing in future. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a983aaf5e1284702a26dcb2d2426e1e6b"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::allocGuardList" ref="a983aaf5e1284702a26dcb2d2426e1e6b" args="(size_t nCount)" -->
<a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a983aaf5e1284702a26dcb2d2426e1e6b">allocGuardList</a> (size_t nCount)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates guard list for a thread. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a394699dc369302390ca1f4852d96bc79"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::freeGuardList" ref="a394699dc369302390ca1f4852d96bc79" args="(details::guard_data *pList)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a394699dc369302390ca1f4852d96bc79">freeGuardList</a> (<a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a> *pList)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees thread's guard list pointed by <code>pList</code>. <br/></td></tr>
<tr><td class="memTemplParams" colspan="2"><a class="anchor" id="a84a4589208207a730376b5583fb29808"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::retirePtr" ref="a84a4589208207a730376b5583fb29808" args="(T *p, void(*pFunc)(T *))" -->
template&lt;typename T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a84a4589208207a730376b5583fb29808">retirePtr</a> (T *p, void(*pFunc)(T *))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Places retired pointer <code>and</code> its deleter <code>pFunc</code> into thread's array of retired pointer for deferred reclamation. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7deece3a1d6e31a74697d41c1d00b15f"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::retirePtr" ref="a7deece3a1d6e31a74697d41c1d00b15f" args="(const retired_ptr &amp;p)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7deece3a1d6e31a74697d41c1d00b15f">retirePtr</a> (const <a class="el" href="structcds_1_1gc_1_1details_1_1retired__ptr.html">retired_ptr</a> &amp;p)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Places retired pointer <code>into</code> thread's array of retired pointer for deferred reclamation. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#ac68b3c9e07582f51053f401522edc0f8">try_liberate</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls liberate function.  <a href="#ac68b3c9e07582f51053f401522edc0f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7e97919ce25403475bd6348aa55918da">liberate</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Liberate function.  <a href="#a7e97919ce25403475bd6348aa55918da"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Memory manager (Garbage collector) </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a37de38bb1d420c2aec2d7d5150d95fa7"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::allocGuard" ref="a37de38bb1d420c2aec2d7d5150d95fa7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a>* cds::gc::ptb::GarbageCollector::allocGuard </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal interface. </p>
<p>Allocates a guard </p>

</div>
</div>
<a class="anchor" id="ab84b0e25888dca13a32726fd43f3a98b"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::Construct" ref="ab84b0e25888dca13a32726fd43f3a98b" args="(size_t nLiberateThreshold=2048, size_t nInitialThreadGuardCount=8)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void CDS_STDCALL cds::gc::ptb::GarbageCollector::Construct </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"> <em>nLiberateThreshold</em> = <code>2048</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"> <em>nInitialThreadGuardCount</em> = <code>8</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes PTB memory manager singleton. </p>
<p>This member function creates and initializes PTB global object. The function should be called before using CDS data structure based on <a class="el" href="structcds_1_1gc_1_1ptb__gc.html" title="Tag for &quot;Pass the Buck&quot; reclamation schema.">cds::gc::ptb_gc</a> GC. Usually, this member function is called in the <code>main()</code> function. See <a class="el" href="namespacecds_1_1gc_1_1ptb.html" title="Pass The Buck reclamation schema.">cds::gc::ptb</a> for example. After calling of this function you may use CDS data structures based on PTB GC <a class="el" href="structcds_1_1gc_1_1ptb__gc.html" title="Tag for &quot;Pass the Buck&quot; reclamation schema.">cds::gc::ptb_gc</a>.</p>
<dl class="user"><dt><b>Parameters</b></dt><dd><ul>
<li><code>nLiberateThreshold</code> - the liberate threshold. When count of retired pointers reaches this value, the <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7e97919ce25403475bd6348aa55918da">liberate</a> member function would called for freeing retired pointers. If <code>nLiberateThreshold</code> &lt;= 1, <code>liberate</code> would called after each <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a84a4589208207a730376b5583fb29808">retirePtr</a> call. </li>
<li><code>nInitialThreadGuardCount</code> - initial count of guard allocated for <a class="el" href="classcds_1_1gc_1_1ptb_1_1_thread_g_c.html" title="Thread GC.">ThreadGC</a>. When a thread is initialized the GC allocates local guard pool for the thread from common guard pool. By perforce the local thread's guard pool is grown automatically from common pool. When the thread terminated its guard pool is backed to common GC's pool. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="aca8282ef97000c6892a6a409f29b8b95"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::Destruct" ref="aca8282ef97000c6892a6a409f29b8b95" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void CDS_STDCALL cds::gc::ptb::GarbageCollector::Destruct </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroys PTB memory manager. </p>
<p>The member function destroys PTB global object. After calling of this function you may <b>NOT</b> use CDS data structures based on PTB GC <a class="el" href="structcds_1_1gc_1_1ptb__gc.html" title="Tag for &quot;Pass the Buck&quot; reclamation schema.">cds::gc::ptb_gc</a>. Usually, the <code>Destruct</code> function is called at the end of your <code>main()</code>. See <a class="el" href="namespacecds_1_1gc_1_1ptb.html" title="Pass The Buck reclamation schema.">cds::gc::ptb</a> for example. </p>

</div>
</div>
<a class="anchor" id="a4b6cbefdfbc11ed9ad6178a8955d2e5a"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::getInternalState" ref="a4b6cbefdfbc11ed9ad6178a8955d2e5a" args="(InternalState &amp;stat) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html">InternalState</a>&amp; cds::gc::ptb::GarbageCollector::getInternalState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html">InternalState</a> &amp;&#160;</td>
          <td class="paramname"> <em>stat</em>&#160;)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal statistics. </p>
<p>Get internal statistics </p>

</div>
</div>
<a class="anchor" id="a3e7be5aec4135783ae8446aa3881920a"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::instance" ref="a3e7be5aec4135783ae8446aa3881920a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a>&amp; cds::gc::ptb::GarbageCollector::instance </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns pointer to <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html" title="Memory manager (Garbage collector)">GarbageCollector</a> instance. </p>
<p>If PTB GC is not initialized, <code>PTBManagerEmpty</code> exception is thrown </p>

</div>
</div>
<a class="anchor" id="a7e97919ce25403475bd6348aa55918da"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::liberate" ref="a7e97919ce25403475bd6348aa55918da" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cds::gc::ptb::GarbageCollector::liberate </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Liberate function. </p>
<p>The main function of Pass The Buck algorithm. It tries to free retired pointers if they are not trapped by any guard. </p>

</div>
</div>
<a class="anchor" id="ac68b3c9e07582f51053f401522edc0f8"></a><!-- doxytag: member="cds::gc::ptb::GarbageCollector::try_liberate" ref="ac68b3c9e07582f51053f401522edc0f8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cds::gc::ptb::GarbageCollector::try_liberate </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calls liberate function. </p>
<p>This function tries to call <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7e97919ce25403475bd6348aa55918da">liberate</a> procedure if it is not active. Returns <code>true</code>, if calling of <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7e97919ce25403475bd6348aa55918da">liberate</a> is succeeded, <code>false</code> otherwise.</p>
<p>This function may be called directly if needed. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cds/gc/ptb/ptb.h</li>
</ul>
</div>
		<hr/>
		<div align="right">
			<b>cds</b> <b>0.7.0</b> 
			Developed by <i>Maxim Khiszinsky aka khizmax</i> 2007 - 2010
			<br/>
			<i>Autogenerated Sun Dec 5 2010 11:36:31 by Doxygen 1.7.2</i>
		</div>
	</BODY>
</HTML>
