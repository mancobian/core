<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cds: cds::gc::hzp::details::HPAllocator&lt; HPTYPE, ALLOCATOR &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespacecds.html">cds</a>      </li>
      <li><a class="el" href="namespacecds_1_1gc.html">gc</a>      </li>
      <li><a class="el" href="namespacecds_1_1gc_1_1hzp.html">hzp</a>      </li>
      <li><a class="el" href="namespacecds_1_1gc_1_1hzp_1_1details.html">details</a>      </li>
      <li><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html">HPAllocator</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<h1>cds::gc::hzp::details::HPAllocator&lt; HPTYPE, ALLOCATOR &gt; Class Template Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="cds::gc::hzp::details::HPAllocator" -->
<p>Allocator of hazard pointers for the thread.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;hp_alloc.h&gt;</code></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a43c991bb9cd1b8394a8174a54524b376">HPAllocator</a> (size_t nCapacity)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default ctor.  <a href="#a43c991bb9cd1b8394a8174a54524b376"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5fe1247cf34a4428ea5cb0b317955c71"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::capacity" ref="a5fe1247cf34a4428ea5cb0b317955c71" args="() const " -->
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a5fe1247cf34a4428ea5cb0b317955c71">capacity</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get capacity of array. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a949c1804e61e8155761fe8c3cbd65c27"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::size" ref="a949c1804e61e8155761fe8c3cbd65c27" args="() const " -->
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a949c1804e61e8155761fe8c3cbd65c27">size</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get size of array. The size should be equal to the capacity of array. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adca300d75658711947d262ca8d14986b"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::isFull" ref="adca300d75658711947d262ca8d14986b" args="() const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#adca300d75658711947d262ca8d14986b">isFull</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if all items are allocated. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec045fc8bd85ddd59ef8c09a86641eb9"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::alloc" ref="aec045fc8bd85ddd59ef8c09a86641eb9" args="(HPGuardT&lt; HPTYPE &gt; &amp;hp)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#aec045fc8bd85ddd59ef8c09a86641eb9">alloc</a> (<a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_guard_t.html">HPGuardT</a>&lt; HPTYPE &gt; &amp;hp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates hazard pointer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac78245a9e5ef5135303461b8f5df1ccb"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::free" ref="ac78245a9e5ef5135303461b8f5df1ccb" args="(HPGuardT&lt; HPTYPE &gt; &amp;)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#ac78245a9e5ef5135303461b8f5df1ccb">free</a> (<a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_guard_t.html">HPGuardT</a>&lt; HPTYPE &gt; &amp;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees previously allocated hazard pointer. <br/></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;size_t COUNT&gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a40948a15bcecc4c2893831cfbcb0982e">alloc</a> (<a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_array_t.html">HPArrayT</a>&lt; HPTYPE, COUNT &gt; &amp;arr)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates hazard pointers array.  <a href="#a40948a15bcecc4c2893831cfbcb0982e"></a><br/></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;size_t COUNT&gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#ab78265d01b2e44fc24abcdc8253b1c13">free</a> (const <a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_array_t.html">HPArrayT</a>&lt; HPTYPE, COUNT &gt; &amp;arr)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees hazard pointer array.  <a href="#ab78265d01b2e44fc24abcdc8253b1c13"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f7e88f9f5ac8543f26521f053f51ed6"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::clear" ref="a9f7e88f9f5ac8543f26521f053f51ed6" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a9f7e88f9f5ac8543f26521f053f51ed6">clear</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes all HP free. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8cb6983a5d7def0d979927a93000b1e7"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::operator[]" ref="a8cb6983a5d7def0d979927a93000b1e7" args="(size_t i)" -->
HPTYPE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a8cb6983a5d7def0d979927a93000b1e7">operator[]</a> (size_t i)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns to i-th hazard pointer. <br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73d9f819fa853b6e7c40636313b50394"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::THazardArray" ref="a73d9f819fa853b6e7c40636313b50394" args="" -->
typedef <br class="typebreak"/>
cds::details::BoundedArray<br class="typebreak"/>
&lt; HPTYPE, ALLOCATOR &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a73d9f819fa853b6e7c40636313b50394">THazardArray</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Hazard pointer array type. <br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a547f9d20d32cce1d92baec5358488243"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::m_arrHazardPtr" ref="a547f9d20d32cce1d92baec5358488243" args="" -->
<a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a73d9f819fa853b6e7c40636313b50394">THazardArray</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a547f9d20d32cce1d92baec5358488243">m_arrHazardPtr</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of hazard pointers. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a69ca98a48cb101575a253f3b1782e6fe"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::m_nTop" ref="a69ca98a48cb101575a253f3b1782e6fe" args="" -->
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html#a69ca98a48cb101575a253f3b1782e6fe">m_nTop</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The top of stack. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename HPTYPE, class ALLOCATOR = CDS_DEFAULT_ALLOCATOR&gt;<br/>
 class cds::gc::hzp::details::HPAllocator&lt; HPTYPE, ALLOCATOR &gt;</h3>

<p>Allocator of hazard pointers for the thread. </p>
<p>The max size (capacity) of array is defined at ctor time and cannot be changed during object's lifetime The array contains free item list that manages allocation and deallocation of array's free items (i.e. unused hazard pointers)</p>
<p>Template parameters: </p>
<ul>
<li>HPTYPE - type of hazard pointer (HazardPtr usually) </li>
<li>ALLOCATOR - memory allocator class, default is CDS_DEFAULT_ALLOCATOR</li>
</ul>
<p>This helper class should not be used directly. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a43c991bb9cd1b8394a8174a54524b376"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::HPAllocator" ref="a43c991bb9cd1b8394a8174a54524b376" args="(size_t nCapacity)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HPTYPE, class ALLOCATOR = CDS_DEFAULT_ALLOCATOR&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html">cds::gc::hzp::details::HPAllocator</a>&lt; HPTYPE, ALLOCATOR &gt;::<a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html">HPAllocator</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"> <em>nCapacity</em>&#160;)</td>
          <td><code> [inline, explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default ctor. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">nCapacity</td><td>capacity </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a40948a15bcecc4c2893831cfbcb0982e"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::alloc" ref="a40948a15bcecc4c2893831cfbcb0982e" args="(HPArrayT&lt; HPTYPE, COUNT &gt; &amp;arr)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HPTYPE, class ALLOCATOR = CDS_DEFAULT_ALLOCATOR&gt; </div>
<div class="memtemplate">
template&lt;size_t COUNT&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html">cds::gc::hzp::details::HPAllocator</a>&lt; HPTYPE, ALLOCATOR &gt;::alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_array_t.html">HPArrayT</a>&lt; HPTYPE, COUNT &gt; &amp;&#160;</td>
          <td class="paramname"> <em>arr</em>&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocates hazard pointers array. </p>
<p>Allocates <code>COUNT</code> hazard pointers from array <code>m_arrHazardPtr</code> Returns initialized object <code>arr</code> </p>

</div>
</div>
<a class="anchor" id="ab78265d01b2e44fc24abcdc8253b1c13"></a><!-- doxytag: member="cds::gc::hzp::details::HPAllocator::free" ref="ab78265d01b2e44fc24abcdc8253b1c13" args="(const HPArrayT&lt; HPTYPE, COUNT &gt; &amp;arr)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HPTYPE, class ALLOCATOR = CDS_DEFAULT_ALLOCATOR&gt; </div>
<div class="memtemplate">
template&lt;size_t COUNT&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_allocator.html">cds::gc::hzp::details::HPAllocator</a>&lt; HPTYPE, ALLOCATOR &gt;::free </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcds_1_1gc_1_1hzp_1_1details_1_1_h_p_array_t.html">HPArrayT</a>&lt; HPTYPE, COUNT &gt; &amp;&#160;</td>
          <td class="paramname"> <em>arr</em>&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Frees hazard pointer array. </p>
<p>Frees the array of hazard pointers allocated by previous call <code>this-&gt;alloc</code>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cds/gc/hzp/details/hp_alloc.h</li>
</ul>
</div>
		<hr/>
		<div align="right">
			<b>cds</b> <b>0.7.0</b> 
			Developed by <i>Maxim Khiszinsky aka khizmax</i> 2007 - 2010
			<br/>
			<i>Autogenerated Sun Dec 5 2010 11:36:31 by Doxygen 1.7.2</i>
		</div>
	</BODY>
</HTML>
